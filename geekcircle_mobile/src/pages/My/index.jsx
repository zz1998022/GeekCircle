import {useEffect, useState} from "react";
import {Link , useNavigate} from "react-router-dom";
import { Grid } from 'antd-mobile'
import './My.css';
import Bottom from "../../components/Bottom";
import service from "../../request/axios";

function My(){
    const navigate = useNavigate();
    const token = localStorage.getItem('mobile_token');

    //用户信息
    const [info , setInfo] = useState({});

    useEffect(() => {
        if(token === null){
            navigate('/login');
        }
        getMyInfo();
    },[token])

    const getMyInfo = () => {
        service.get('/user').then((result) => {
            setInfo(result);
        })
    }

    return (
        <>
            <div className="container">
                <div className="user_profile">
                <div className="info">
                    <div className="van_image">
                        <img className="van-image__img" src={info.photo} />
                    </div>
                    <h3 className="name">{info.name}</h3>
                    <Link to="/myInfo" className="btn">个人信息 ></Link>
                </div>
                <Grid columns={4} gap={8}>
                    <Grid.Item>
                        <div className="van_item">
                            <p>{info.art_count}</p>
                            <p>动态</p>
                        </div>
                    </Grid.Item>
                    <Grid.Item>
                        <div className="van_item">
                            <p>{info.follow_count}</p>
                            <p>关注</p>
                        </div>
                    </Grid.Item>
                    <Grid.Item>
                        <div className="van_item">
                            <p>{info.fans_count}</p>
                            <p>粉丝</p>
                        </div>
                    </Grid.Item>
                    <Grid.Item>
                        <div className="van_item">
                            <p>{info.like_count}</p>
                            <p>被赞</p>
                        </div>
                    </Grid.Item>
                </Grid>
                <div className="user_links">
                    <Grid columns={4} gap={8}>
                        <Grid.Item>
                            <div className="van_item">
                               {/*图标*/}
                                <div className="tt_icon">
                                    <svg t="1652141614022" className="icon" viewBox="0 0 1024 1024" version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" p-id="1935" width="30" height="20">
                                        <path
                                            d="M544 161.536a330.666667 330.666667 0 0 1 298.666667 329.130667h-0.341334c0.213333 1.493333 0.341333 2.986667 0.341334 4.565333v219.434667h39.68a32 32 0 0 1 0 64h-212.053334a160 160 0 0 1-316.586666 0H141.909333a32 32 0 1 1 0-64h39.424v-219.434667c0-1.578667 0.128-3.072 0.341334-4.565333H181.333333a330.666667 330.666667 0 0 1 298.666667-329.130667V128a32 32 0 1 1 64 0v33.536z m-298.666667 553.130667h533.333334v-219.434667c0-1.578667 0.128-3.072 0.341333-4.565333h-0.341333a266.666667 266.666667 0 1 0-533.333334 0h-0.341333c0.213333 1.493333 0.341333 2.986667 0.341333 4.565333v219.434667z m359.765334 64H418.901333a96 96 0 0 0 186.197334 0z"
                                            fill="#707070" p-id="1936" data-spm-anchor-id="a313x.7781069.0.i0"
                                            className=""></path>
                                    </svg>
                                </div>
                                消息通知
                            </div>
                        </Grid.Item>
                        <Grid.Item>
                            <Link to="/myCollections" className="van_item">
                                {/*图标*/}
                                <div className="tt_icon">
                                    <svg t="1652141959707" className="icon" viewBox="0 0 1114 1024" version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" p-id="7632" width="20" height="20">
                                        <path
                                            d="M557.181481 1024a27.696155 27.696155 0 0 1-19.188187-7.964907L98.837261 576.698038A337.784484 337.784484 0 0 1 557.181481 81.24459a337.784484 337.784484 0 0 1 458.52524 495.453448L576.369667 1016.035093a26.972073 26.972073 0 0 1-19.188186 7.964907zM337.603464 54.453538A283.297277 283.297277 0 0 0 137.213633 538.321666l419.967848 420.148868L977.511369 538.321666A283.478297 283.478297 0 0 0 576.369667 137.542004a27.334114 27.334114 0 0 1-38.376373 0A281.849112 281.849112 0 0 0 337.603464 54.453538z"
                                            fill="#3D3D3D" p-id="7633"></path>
                                        <path
                                            d="M187.175325 262.989297a37.109228 37.109228 0 0 1-11.58532-1.991227 36.204125 36.204125 0 0 1-22.627578-45.979239A149.885077 149.885077 0 0 1 271.530936 108.759725a36.204125 36.204125 0 0 1 7.783887 72.40825 78.38193 78.38193 0 0 0-58.469662 57.564558 36.204125 36.204125 0 0 1-33.669836 24.256764z"
                                            fill="#F683A2" p-id="7634"></path>
                                    </svg></div>
                                我的收藏
                            </Link>
                        </Grid.Item>
                        <Grid.Item>
                            <div className="van_item">
                                {/*图标*/}
                                <div className="tt_icon">
                                    <svg t="1652141998849" className="icon" viewBox="0 0 1024 1024" version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" p-id="8532" width="20" height="20">
                                        <path
                                            d="M733.013333 503.893333h-185.173333V264.106667a35.84 35.84 0 0 0-72.106667 0v240.213333a72.106667 72.106667 0 0 0 72.106667 72.106667h185.173333a35.84 35.84 0 0 0 0-72.106667z m90.026667 319.146667A439.893333 439.893333 0 1 1 341.333333 106.666667a439.893333 439.893333 0 0 1 481.706667 716.373333zM512 0a512 512 0 1 0 512 512A512 512 0 0 0 512 0z"
                                            fill="#5E5C5C" p-id="8533"></path>
                                    </svg></div>
                                阅读历史
                            </div>
                        </Grid.Item>
                        <Grid.Item>
                            <div className="van_item">
                                {/*图标*/}
                                <div className="tt_icon">
                                    <svg t="1652142037170" className="icon" viewBox="0 0 1024 1024" version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" p-id="11274" width="20" height="20">
                                        <path
                                            d="M512.095167 65.290005c-159.675676 0-291.461141 132.104737-291.461141 294.480918 0 99.006921 38.960337 178.750103 116.649743 231.970212l0 95.180779c0 10.843976 6.385431 21.195741 14.307867 28.54922 7.15905 6.643304 17.454534 10.29446 27.121707 10.29446 1.032516 0 2.533706-0.042979 3.570315-0.12382l267.163759-21.518083c20.058848-1.627057 37.434587-18.47477 37.434587-38.715767l0-73.02313c67.977207-49.285496 116.483968-134.508483 116.483968-232.614895C803.365974 197.394742 671.76982 65.290005 512.095167 65.290005zM628.192326 536.035416c-12.589736 6.747681-18.998703 19.928888-18.998703 34.282804l0 59.252499-194.22147 15.249309 0-74.478272c0-13.81668-5.649674-26.591635-17.512862-33.553187-66.86692-39.237653-98.546434-97.139387-98.546434-177.018669 0-119.53956 95.675036-216.791511 212.770941-216.791511 117.095905 0 213.293851 97.252974 213.293851 216.791511C724.977649 437.34572 689.378873 503.241522 628.192326 536.035416zM683.397648 786.759761c1.546216 21.399379-14.440897 40.006156-35.707246 41.556465L382.452505 847.699692c-0.951675 0.071631-1.899256 0.104377-2.841721 0.104377-20.050662 0-36.989449-15.591093-38.465057-36.028565-1.546216-21.399379 14.440897-40.006156 35.706223-41.556465l265.237897-19.384489C663.310148 749.261729 681.856549 765.359358 683.397648 786.759761zM598.893023 909.428591c1.635243 21.389146-14.271028 40.067554-35.533284 41.713031l-96.245018 7.453762c-1.007957 0.075725-2.01182 0.113587-3.006474 0.113587-19.980054 0-36.895305-15.486716-38.455847-35.861766-1.635243-21.389146 14.272052-40.066531 35.534308-41.713031l96.243995-7.453762C578.725704 872.130104 597.253686 888.038422 598.893023 909.428591zM666.877393 359.050516c-1.701758 17.558911-16.401552 30.693046-33.58184 30.693046-1.098008 0-2.206248-0.056282-3.322675-0.164752-18.570961-1.820462-32.153304-18.441001-30.344099-37.128619 5.387707-55.587016-43.144636-75.322499-48.691979-77.389578-17.386996-6.477528-26.492374-25.889647-20.214391-43.434232 6.277984-17.548678 25.281803-26.780947 42.777269-20.641109C609.532337 223.649709 675.423023 270.892687 666.877393 359.050516z"
                                            p-id="11275"></path>
                                    </svg></div>
                                我的作品
                            </div>
                        </Grid.Item>
                    </Grid>
                </div>
            </div>
            <div className="more">
                <p>更多服务</p>
                <div className="user_links">
                    <Grid columns={4} gap={8}>
                        <Grid.Item>
                            <div className="van_item">
                                {/*图标*/}
                                <div className="tt_icon">
                                    <svg t="1652143413413" className="icon" viewBox="0 0 1024 1024" version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" p-id="18221" width="30" height="30">
                                        <path
                                            d="M512 968C260.8 968 56 763.2 56 512S260.8 56 512 56 968 260.8 968 512 763.2 968 512 968z m0-864C286.4 104 104 286.4 104 512S286.4 920 512 920 920 737.6 920 512 737.6 104 512 104z"
                                            p-id="18222"></path>
                                        <path
                                            d="M632 283.2c27.2 25.6 41.6 59.2 41.6 104 0 32-9.6 60.8-27.2 86.4-6.4 8-27.2 27.2-60.8 56-16 12.8-27.2 25.6-33.6 40-9.6 16-14.4 33.6-14.4 54.4v16h-59.2v-16c0-24 4.8-46.4 14.4-64 9.6-20.8 33.6-49.6 73.6-84.8 9.6-9.6 17.6-19.2 25.6-27.2 14.4-19.2 20.8-38.4 20.8-57.6 0-28.8-8-52.8-24-68.8-17.6-17.6-41.6-25.6-73.6-25.6-36.8 0-64 12.8-81.6 36.8-16 20.8-24 49.6-24 84.8h-59.2c0-51.2 14.4-92.8 43.2-123.2 30.4-32 72-48 123.2-48 49.6-1.6 88 11.2 115.2 36.8z m-92.8 422.4c8 8 12.8 19.2 12.8 30.4 0 12.8-4.8 24-12.8 32-9.6 8-19.2 12.8-32 12.8s-24-4.8-32-12.8c-9.6-9.6-12.8-19.2-12.8-32s4.8-22.4 12.8-30.4 17.6-12.8 32-12.8c12.8 0 24 3.2 32 12.8z"
                                            p-id="18223"></path>
                                    </svg>
                                    </div>
                                    用户反馈
                            </div>
                        </Grid.Item>
                        <Grid.Item>
                            <Link to="/chat" className="van_item">
                                {/*图标*/}
                                <div className="tt_icon">
                                    <svg t="1652143260276" className="icon" viewBox="0 0 1024 1024" version="1.1"
                                         xmlns="http://www.w3.org/2000/svg" p-id="13058" width="30" height="30">
                                        <path
                                            d="M927.616 465.6C923.328 236.704 745.888 51.808 528 51.808h-32c-217.888 0-395.328 184.896-399.616 413.76C58.112 487.744 32 528.672 32 576v64c0 70.592 57.408 128 128 128s128-57.408 128-128v-64a128.064 128.064 0 0 0-126.784-127.872C173.728 262.688 318.912 115.808 496 115.808h32c177.12 0 322.272 146.88 334.784 332.32A128.064 128.064 0 0 0 736 576v64c0 57.792 38.72 106.176 91.392 122.016a337.504 337.504 0 0 1-191.936 124.48A79.712 79.712 0 0 0 560 832a80 80 0 1 0 0 160 79.68 79.68 0 0 0 67.872-38.112 402.432 402.432 0 0 0 278.24-193.6C955.968 742.816 992 695.776 992 640v-64c0-47.328-26.112-88.256-64.384-110.4zM224 576v64c0 35.296-28.704 64-64 64s-64-28.704-64-64v-64c0-35.296 28.704-64 64-64s64 28.704 64 64z m704 64c0 34.304-27.2 62.176-61.12 63.712l-2.496-1.184c-0.224 0.512-0.576 0.928-0.8 1.408A64 64 0 0 1 800 640v-64c0-35.296 28.704-64 64-64s64 28.704 64 64v64z"
                                            p-id="13059"></path>
                                    </svg>
                                </div>
                                    小智同学
                            </Link>
                        </Grid.Item>
                    </Grid>
                </div>
            </div>
            </div>

            <div className="bottom">
                <Bottom />
            </div>
        </>
    )
}
export default My;